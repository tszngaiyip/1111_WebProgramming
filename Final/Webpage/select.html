<!DOCTYPE html>
<html>
<head>
	<meta charset = "utf-8">
    <title>select</title>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;600&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="select.css">
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
	<button onclick="location.href='ledger.php'" style="
						top: -20px;
						right: 20px;
						position: absolute;
						margin-top: 50px;
						width: 150px;
						background-color: #3B3B3B;
						color: #ffffff;
						padding: 15px 0;
						font-size: 18px;
						font-weight: 600;
						border-radius: 5px;
						cursor: pointer;">查詢記帳</button>
    <div class="background">
        <div class="shape"></div>
		<div class="shape"></div>
    </div>
	<form id="filter-form">
    <div class="di">
        <h3>今天要吃什麼勒OWO</h3>
         <h4>食物類別:</h4>
	<table>
	<tr>
		<td><input type="radio" id="ft_all" name="food_type[]" value="" checked="checked">
			<label for="ft_all">都可</label>
		</td>
		<td><input type="radio" id="ft_1" name="food_type[]" value="套餐">
			<label for="ft_1">套餐</label>
		</td>
			<td><input type="radio" id="ft_17" name="food_type[]" value="飯">
		<label for="ft_17">飯類</label>
		<td><input type="radio" id="ft_20" name="food_type[]" value="麵">
			<label for="ft_20">麵類</label>
		</td>
	</tr>
	<tr>
		<td><input type="radio" id="ft_18" name="food_type[]" value="餃子">
			<label for="ft_18">餃子</label>
		</td>
		<td><input type="radio" id="ft_15" name="food_type[]" value="袋餅">
			<label for="ft_15">袋餅</label>
		</td>
		<td><input type="radio" id="ft_8" name="food_type[]" value="沙拉">
			<label for="ft_8">沙拉</label>
		</td>
		<td><input type="radio" id="ft_4" name="food_type[]" value="吐司">
			<label for="ft_4">吐司</label>
		</td>
	</tr>
	<tr>
		<td><input type="radio" id="ft_14" name="food_type[]" value="蛋餅">
			<label for="ft_14">蛋餅</label>
		</td>
		<td><input type="radio" id="ft_9" name="food_type[]" value="漢堡">
			<label for="ft_9">漢堡</label>
		</td>
		<td><input type="radio" id="ft_19" name="food_type[]" value="鬆餅">
			<label for="ft_19">鬆餅</label>
		</td>
		<td><input type="radio" id="ft_5" name="food_type[]" value="抓餅">
			<label for="ft_5">抓餅</label>
		</td>
	</tr>
	<tr>
		<td><input type="radio" id="ft_3" name="food_type[]" value="可頌">
			<label for="ft_3">可頌</label>
		</td>
		<td><input type="radio" id="ft_11" name="food_type[]" value="燒餅">
			<label for="ft_11">燒餅</label>
		</td>
		<td><input type="radio" id="ft_7" name="food_type[]" value="比薩">
			<label for="ft_7">比薩</label>
		</td>
		<td><input type="radio" id="ft_6" name="food_type[]" value="捲餅">
			<label for="ft_6">捲餅</label>
		</td>
	</tr>
	<tr>
		<td><input type="radio" id="ft_13" name="food_type[]" value="羹">
			<label for="ft_13">羹</label>
		</td>
		<td><input type="radio" id="ft_16" name="food_type[]" value="貝果">
			<label for="ft_16">貝果</label>
		</td>
		<td><input type="radio" id="ft_10" name="food_type[]" value="潛艇堡">
			<label for="ft_10">潛艇堡</label>
		</td>
		<td><input type="radio" id="ft_2" name="food_type[]" value="三明治">
			<label for="ft_2">三明治</label>
		</td>
	</tr>
	</table>
		<p><h4>餐廳:</h4>
            <select id="select" name="restaurant[]">
				<option value="">全部</option>
				<optgroup label="教學區">
					<option value="卡利西里">卡利西里 </option>
					<option value="小木屋">小木屋 </option>
				</optgroup>
				<optgroup label="宿舍區">
					<option value="料理廚房">馺哈料理廚房</option>
					<option value="二師兄">二師兄 </option>
					<option value="仙桃總鋪">仙桃總鋪 </option>
					<option value="呷飽">呷飽 </option>
					<option value="喜樂早餐">喜樂早餐 </option>
					<option value="太發龍">太發龍 </option>
					<option value="山口食務所">山口食務所 </option>
					<option value="玉食屋">玉食屋 </option>
					<option value="美而美">美而美 </option>
					<option value="興仁食堂">興仁食堂 </option>
					<option value="陽光早餐屋">陽光早餐屋 </option>
					<option value="雲之羹">雲之羹 </option>
				</optgroup>
			</select>
		</p>
		<p>&emsp;</p>
		<p>
			<label for="username" style="text-align: left;">要添加記錄到自己的帳號，請在下方輸入帳號
			<br>(未註冊帳號可按此註冊)<a href="login.html" style="color:white;">註冊</a></label>
			<input type="text" placeholder="帳號" id="name" name="name" style="width: 100%; height: 30px;">
		</p>
         <p>
			<div>
				<button id="submit-button"> Filter </button>
			</div>
		 </p>
	</form>
		 <p>&emsp;</p>
		 <p>
			<h4>結果:</h4>
		 </p>
		 <div id="result">
		 </div>
		 <div>
			<button type="button" onclick="add()"> 添加記錄到自己的帳號 </button>
		 </div>
		 <div id="state"></div>
    </div>
	<script>
		function add(){
			var user = document.getElementById("name").value;
			var res = $("#res").text();
			var nam = $("#nam").text();
			var pri = $("#pri").text();
			var date = new Date();
			var day = date.getDate();
			var month = date.getMonth() + 1;
			var year = date.getFullYear();
			var currentDate = `${day}-${month}-${year}`;
			$.ajax({
				url : "login.php",
				data : {	user : user,
							res : res,
							fn : nam,
							price : pri,
							date : currentDate
						},
				type : "GET",
				datatype : "html",
				success : function(result){
					if(result == 1){
						alert("以存入");
						location.href="ledger.php";
					}
					else{
						alert("帳號有誤");
					}
				},
				error : function(){
					alert("沒");
				}
				
			
			})
		}
	$("#submit-button").click(function(event) {
			event.preventDefault();
			var formData = $("#filter-form").serialize();
			$.ajax({
				type: "POST",
				url: "filter.php",
				data: formData,
				success: function(response) {
					$("#result").html(response);
				}
			});
		});
	</script>
</body>
</html>

